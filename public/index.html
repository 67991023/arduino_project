<!DOCTYPE html>
<html>
<head>
  <title>Real-Time Serial Plot</title>
  <script src="https://cdn.jsdelivr.net/npm/smoothie@1.33.0/smoothie.min.js"></script>
</head>
<body>
  <canvas id="chart" width="800" height="400"></canvas>
  <script>
    const canvas = document.getElementById('chart');
    const smoothie = new SmoothieChart();
    smoothie.streamTo(canvas);

    const line = new TimeSeries();
    smoothie.addTimeSeries(line);

    const ws = new WebSocket('ws://localhost:3000');
    ws.onmessage = (event) => {
      const values = event.data.split(',');
      const yValue = parseFloat(values[0]); // Use first value
      if (!isNaN(yValue)) {
        line.append(new Date().getTime(), yValue);
      }
    };
  </script>
</body>
</html>   